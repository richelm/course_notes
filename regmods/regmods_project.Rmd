---
title: "Relationship of Variables and Miles Per Gallon"
author: "Shawn Rich"
date: "January 26, 2016"
output: html_document
---

```{r warning=FALSE, echo=FALSE, error=FALSE, message=FALSE}
# load libraries
library(UsingR)
data("mtcars")
```

## Synopsis

In this report I will use the mtcars dataset to examine the relationship among the variables in the data and miles per gallon (MPG) as outcome. Specifically I will address whether the an automatic or manual transmission results in better gas milage for the car. To this end I will quantify the MPG difference between automatic and manual transmissions.

## Executive Summary


## Data Exploration

Before building models and analysis we need an understanding of the data. Appendix A list the variables in the dataset with their descriptions and the first rows of the dataset. Next we see if a null hypothesis is true. Specifically is the difference of the mean mpg of automatic vs manual equal zero? Visually we can see this in the boxplot. The t-test, with p-value of 0.0014, gives us more confidence that we can reject the null in favor the alternate hypothesis. There is a diffence in mile per gallon. 


## Data Analysis

First we look at the correlation among all variables against *mpg* to see which should be included in our model. From the correlation matrix we that *cyl*, *disp*, *hp*, and *wt* are highly correlated with mgp. There is also a high correlation of `r cor(mtcars$disp, mtcars$cyl)` between *disp* and *cyl*, which mean we may not want to inlcude both. This correlation make intuitive sense, because more cyclinders the more overall displacement an engine would have.


## Appendix A - Detail Data Exploration

The MTCARS dataset variables and their descriptions.

~~~~~
mpg         Miles/(US) gallon  
cyl         Number of cylinders  
disp        Displacement (cu.in.)  
hp          Gross horsepower  
drat        Rear axle ratio  
wt          Weight (1000 lbs)  
qsec        1/4 mile time  
vs          Cylinder alignment (0 - V; 1 - straight)
am          Transmission type (0 = automatic, 1 = manual)  
gear        Number of forward gears  
carb        Number of carburetors  
~~~~~

The first 10 rows of the dataset to get a overall view of the data.

```{r echo=FALSE}
head(mtcars)
```

## Apendix B - Detail Data Exploration

**Data Cleanup**

```{r}
# convert am 0,1 values to factor variables auto, manual respectively
#mtcars$am <- as.factor(mtcars$am)
#levels(mtcars$am) <-c("auto", "manual")
```


**Boxplot MPG vs Tranmission Type**

```{r fig.width=5, fig.height = 6}
boxplot(mpg ~ am, data=mtcars, xlab="Transmission Type",
ylab="Miles per Gallon",
main="Automatic versus Manual Transmission MPG")
```

**T-Test**

```{r}
mpg.auto <- mtcars[mtcars$am == 0,]$mpg
mpg.manual <- mtcars[mtcars$am == 1,]$mpg

t.test(mpg.auto, mpg.manual)
```


## Appendix C - Detail Analysis

**Correlation of Variables**

Variables *cyl*, *disp*, *hp*, and *wt* are highly correlated with mgp. The high correlation between *disp* and *cyl*, means we may not want to inlcude both of these. 

```{r}
cor(mtcars)[1,]
cor(mtcars$disp, mtcars$cyl)
```

**The Models**

```{r}
fit1 <- lm(mpg ~ am, data = mtcars)
fit2 <- lm(mpg ~ am + hp, data = mtcars)
fit3 <- lm(mpg ~ am + hp + wt, data = mtcars)
fit4 <- lm(mpg ~ am + hp + wt + cyl, data = mtcars)
fit5 <- lm(mpg ~ am + hp + wt + disp, data = mtcars)
anova(fit1, fit2, fit3, fit4)
anova(fit1, fit2, fit3, fit5)
summary(fit1)$coef[2,]

summary(fit5)$coef
```

**Simple Model Fit**

The simple_model uses just mpg as outcome and am as predictor.

```{r}
simple_model <- lm(mpg ~ am, data = mtcars)
summary(simple_model)$coef
```